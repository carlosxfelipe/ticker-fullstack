{% extends 'base.html' %}

{% block title %}Portfolio{% endblock %}

{% block content %}
  <h1>Bem-vindo ao Portfolio!</h1>
  <div style="margin-bottom: 2rem;">
    <a href="/manager">Ir para Gerenciador de Ativos</a>
  </div>
  <div style="max-width: 600px; margin: auto;">
    <canvas id="pieChart"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Formatador de moeda brasileira
    const formatBRL = new Intl.NumberFormat('pt-BR', {
      style: 'currency',
      currency: 'BRL',
    });

    const data = {
      labels: {{ labels|safe }},
      datasets: [{
        data: {{ values|safe }},
        backgroundColor: [
          '#36A2EB',
          '#FF6384',
          '#FFCE56',
          '#4BC0C0',
          '#9966FF',
          '#FF9F40',
          '#C9CBCF',
          '#8BC34A',
          '#E91E63',
          '#9C27B0',
          '#3F51B5',
          '#2196F3',
          '#03A9F4',
          '#00BCD4',
          '#009688',
          '#4CAF50',
          '#CDDC39',
          '#FFC107',
          '#FF9800',
          '#FF5722',
          '#795548',
          '#9E9E9E',
          '#607D8B',
          '#1ABC9C',
          '#2ECC71',
          '#3498DB',
          '#9B59B6',
          '#34495E',
          '#16A085',
          '#27AE60'
        ],
      }]
    };

    new window.Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: data,
      options: {
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                const value = context.raw;
                return formatBRL.format(value);
              }
            }
          }
        }
      }
    });
  </script>
{% endblock %}
